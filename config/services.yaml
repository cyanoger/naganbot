imports:
    - { resource: parameters.yaml }

services:
    _defaults:
        autowire: true
        autoconfigure: true

    _instanceof:
        App\Twig\Strategy\Escaper\EscaperStrategyInterface:
            tags: ['app.twig.strategy.escaper']

    App\:
        resource: '../src/'
        exclude:
            - '../src/Constant/'
            - '../src/Entity/'
            - '../src/Exception/'
            - '../src/Event/'
            - '../src/ValueObject/'
            - '../src/Kernel.php'

    #> Common

    App\Service\Translation\Intl\IntlMessageVariationsProvider:
        arguments:
            $translator: '@translator'
            $cache: '@cache.app'

    #< Common

    #> Dependency Injection

    App\DependencyInjection\Configurator\Twig\EnvironmentConfigurator:
        decorates: 'twig.configurator.environment'
        arguments:
            $strategiesGenerators: [!tagged app.twig.strategy.escaper]

    #< Dependency Injection

    #> Game

    App\Manager\Game\GameManager:
        arguments:
            $numberOfPlayers: '%app.game.number_of_players%'

    App\Service\Game\NuclearBulletChecker:
        arguments:
            $min: '%app.game.nuclear_bullet.randomizer.min%'
            $max: '%app.game.nuclear_bullet.randomizer.max%'

    #< Game
